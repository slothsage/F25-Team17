{% extends "base.html" %}
{% block content %}
  <h1>Notifications</h1> 
<div style="margin-bottom: 1rem;">
  <a href="{% url 'accounts:notification_settings' %}" class="btn btn-primary">
    Notification Settings
  </a>
</div>

  <p>Viewing as: <strong>{{ request.user.username }}</strong></p>

<form method="post" action="{% url 'accounts:notifications_clear' %}" style="margin-bottom:1rem">
    {% csrf_token %}
    <button class="btn" type="submit">Clear All</button>
</form>

  {% if rows %}
    <ul>
      {% for n in rows %}
        <li>
          {% if not n.read %}<strong>[new]</strong>{% endif %}
          <strong>{{ n.title }}</strong> — {{ n.created_at|date:"Y-m-d H:i" }}
          {% if n.url %}
            — <a href="{{ n.url }}" target="_blank" rel="noopener">View</a>
          {% endif %}
          <div style="white-space:pre-wrap; margin:.25rem 0 0 .5rem;">{{ n.body }}</div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No notifications yet for this user.</p>
  {% endif %}
{% endblock content %}