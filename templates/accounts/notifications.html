{% extends "base.html" %}
{% block content %}
  <h1>Notifications</h1> 
  <p>Viewing as: <strong>{{ request.user.username }}</strong></p>

<form method="post" action="{% url 'accounts:notifications_clear' %}" style="margin-bottom:1rem">
    {% csrf_token %}
    <button class="btn" type="submit">Clear All</button>
</form>

  {% if rows %}
  <ul>
    {% for r in rows %}
      <li>
        {% if not r.is_read %}<strong>[new]</strong>{% endif %}
        <a href="{% url 'accounts:message_detail' r.message.pk %}">{{ r.message.subject }}</a>
        — from {{ r.message.author.username }} — {{ r.message.created_at|date:"Y-m-d H:i" }}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No notifications yet for this user.</p>
{% endif %}
{% endblock content %}